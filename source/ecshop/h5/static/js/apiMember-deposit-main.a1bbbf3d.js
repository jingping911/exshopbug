(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["apiMember-deposit-main"],{6191:function(t,e,n){"use strict";n.r(e);var a=n("820b"),i=n("ad0e");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("eb01");var s,o=n("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"6184fcec",null,!1,a["a"],s);e["default"]=c.exports},"820b":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("cu-custom",{attrs:{bgColor:"bg-white",isBack:!0}},[n("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),n("template",{attrs:{slot:"content"},slot:"content"},[t._v("充值")])],2),n("v-uni-view",{staticClass:"block"},[n("v-uni-view",{staticClass:"title"},[t._v("我的账户")]),n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"my"},[t._v("账户余额："),n("div",{staticClass:"account"},[t._v(t._s(t.advance))]),t._v("元")])],1)],1),n("v-uni-view",{staticClass:"block"},[n("v-uni-view",{staticClass:"title"},[t._v("充值金额")]),n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"amount"},[n("v-uni-view",{staticClass:"list"},t._l(t.amountList,(function(e,a){return n("v-uni-view",{key:a,staticClass:"box",class:{on:e==t.inputAmount},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.select(e)}}},[t._v(t._s(e)+"元")])})),1),n("v-uni-view",{staticClass:"num"},[n("v-uni-view",{staticClass:"text"},[t._v("自定义充值金额")]),n("v-uni-view",{staticClass:"input"},[n("v-uni-input",{attrs:{type:"number"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.oninput.apply(void 0,arguments)}},model:{value:t.inputAmount,callback:function(e){t.inputAmount=e},expression:"inputAmount"}})],1)],1)],1)],1)],1),n("v-uni-view",{staticClass:"block"},[n("v-uni-view",{staticClass:"title"},[t._v("选择支付方式")]),n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"pay-list"},[n("v-uni-view",{staticClass:"row",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.paytype="wxpayh5"}}},[n("v-uni-view",{staticClass:"left"},[n("v-uni-image",{attrs:{src:"https://imgt1.oss-cn-shanghai.aliyuncs.com/ecAllRes/images/wxpay.png"}})],1),n("v-uni-view",{staticClass:"center"},[t._v("微信支付")]),n("v-uni-view",{staticClass:"right"},[n("v-uni-radio",{attrs:{checked:"wxpayh5"==t.paytype,color:"#f06c7a"}})],1)],1),n("v-uni-view",{staticClass:"row",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.paytype="malipaynew"}}},[n("v-uni-view",{staticClass:"left"},[n("v-uni-image",{attrs:{src:"https://imgt1.oss-cn-shanghai.aliyuncs.com/ecAllRes/images/alipay.png"}})],1),n("v-uni-view",{staticClass:"center"},[t._v("支付宝支付")]),n("v-uni-view",{staticClass:"right"},[n("v-uni-radio",{attrs:{checked:"malipaynew"==t.paytype,color:"#f06c7a"}})],1)],1)],1)],1)],1),n("v-uni-view",{staticClass:"pay"},[n("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doDeposit.apply(void 0,arguments)}}},[t._v("立即充值")]),n("v-uni-view",{staticClass:"tis"},[t._v("点击立即充值，即代表您同意"),n("v-uni-view",{staticClass:"terms"},[t._v("《条款协议》")])],1)],1)],1)},r=[]},"95c7":function(t,e,n){var a=n("cca6f");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("237451f4",a,!0,{sourceMap:!1,shadowMode:!1})},ad0e:function(t,e,n){"use strict";n.r(e);var a=n("edd5"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},cca6f:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */.block[data-v-6184fcec]{width:94%;padding:%?20?% 3%}.block .title[data-v-6184fcec]{width:100%;font-size:%?28?%}.block .content .my[data-v-6184fcec]{width:100%;height:%?100?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?28?%;padding-left:%?30?%;border-bottom:solid %?1?% #eee}.block .content .my .account[data-v-6184fcec]{color:#b4a078;font-size:%?36?%;font-weight:500;padding-left:%?50?%;padding-right:%?20?%}.block .content .amount[data-v-6184fcec]{width:100%}.block .content .amount .list[data-v-6184fcec]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?20?% 0}.block .content .amount .list .box[data-v-6184fcec]{width:30%;height:%?120?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-radius:%?10?%;box-shadow:%?0?% %?5?% %?20?% rgba(0,0,0,.05);font-size:%?36?%;background-color:#f1f1f1;color:333}.block .content .amount .list .box.on[data-v-6184fcec]{background-color:#b4a078;color:#fff}.block .content .amount .num[data-v-6184fcec]{margin-top:%?10?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.block .content .amount .num .text[data-v-6184fcec]{padding-right:%?10?%;font-size:%?28?%}.block .content .amount .num .input[data-v-6184fcec]{width:28.2vw;border-bottom:solid %?2?% #999;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.block .content .amount .num .input uni-input[data-v-6184fcec]{margin:0 %?20?%;height:%?60?%;font-size:%?30?%;color:#b4a078;text-align:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.block .content .pay-list[data-v-6184fcec]{width:100%;border-bottom:solid %?1?% #eee}.block .content .pay-list .row[data-v-6184fcec]{width:100%;height:%?120?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.block .content .pay-list .row .left[data-v-6184fcec]{width:%?100?%;-webkit-flex-shrink:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.block .content .pay-list .row .left uni-image[data-v-6184fcec]{width:%?60?%;height:%?60?%}.block .content .pay-list .row .center[data-v-6184fcec]{width:100%;font-size:%?28?%}.block .content .pay-list .row .right[data-v-6184fcec]{width:%?100?%;-webkit-flex-shrink:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.pay[data-v-6184fcec]{margin-top:%?20?%;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-wrap:wrap;flex-wrap:wrap}.pay .btn[data-v-6184fcec]{width:90%;height:%?80?%;border-radius:%?12?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;color:#fff;background:#b4a078;box-shadow:%?0?% %?5?% %?10?% rgba(0,0,0,.2)}.pay .tis[data-v-6184fcec]{margin-top:%?10?%;width:100%;font-size:%?24?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:baseline;-webkit-align-items:baseline;align-items:baseline;color:#999}.pay .tis .terms[data-v-6184fcec]{color:#5a9ef7}',""]),t.exports=e},eb01:function(t,e,n){"use strict";var a=n("95c7"),i=n.n(a);i.a},edd5:function(t,e,n){"use strict";(function(t){var a=n("4ea4");n("b680"),n("d3b7"),n("acd8"),n("ac1f"),n("25f0"),n("466d"),n("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=a(n("1da1")),r=n("ffcc"),s=n("b3d2"),o={onShow:function(){(0,s.toLogin)(),this.iswechatH5=this.is_weixn(),this.code&&this.wxpayh5Pay()},data:function(){return{advance:"0",inputAmount:"",amountList:[10,50,100],paytype:"wxpayh5",alipaywap:"",order_sn:"",code:"",iswechatH5:""}},created:function(){this.GetAdvance()},methods:{is_weixn:function(){var t=navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)},GetAdvance:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,r.memberInfoApi)({});case 2:n=e.sent,t.advance=n.data.info.user_money,t.alipaywap=n.data.info.alipay_url;case 5:case"end":return e.stop()}}),e)})))()},oninput:function(t){if(this.inputAmount.split(".")[1].length>=2)return this.inputAmount=parseFloat(this.inputAmount).toFixed(2),uni.showToast({title:"最多只能输入两位小数哦",icon:"none"}),this.inputAmount},select:function(t){this.inputAmount=t},doDeposit:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("NaN"!=parseFloat(t.inputAmount).toString()){e.next=3;break}return uni.showToast({title:"请输入正确金额",icon:"none"}),e.abrupt("return");case 3:if(!(t.inputAmount<=0)){e.next=6;break}return uni.showToast({title:"请输入大于0的金额",icon:"none"}),e.abrupt("return");case 6:if(parseFloat(t.inputAmount).toFixed(2)==parseFloat(t.inputAmount)){e.next=9;break}return uni.showToast({title:"最多只能输入两位小数哦~",icon:"none"}),e.abrupt("return");case 9:return e.next=11,(0,r.createOrderApi)({money:t.inputAmount});case 11:n=e.sent,n&&(t.order_sn=n.data),e.t0=t.paytype,e.next="wxpaywxapp"===e.t0?16:"malipaymyapp"===e.t0?19:"wxpayh5"===e.t0?22:"malipaynew"===e.t0?25:"wxpayappplus"===e.t0?28:"malipayappplus"===e.t0?31:34;break;case 16:return t.wxpaywxappPay(),e.abrupt("return",!1);case 19:return t.malipaymyappPay(),e.abrupt("return",!1);case 22:return t.wxpayh5Pay(),e.abrupt("return",!1);case 25:return t.malipaynewPay(),e.abrupt("return",!1);case 28:return t.wxpayappplusPay(),e.abrupt("return",!1);case 31:return t.malipayappplusPay(),e.abrupt("return",!1);case 34:return e.abrupt("return",!1);case 36:case"end":return e.stop()}}),e)})))()},malipaynewPay:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.log(window.location.href),a=e.alipaywap+"&order_sn="+e.order_sn+"&body=账户余额充值&passback_params=deposit&money="+e.inputAmount+"&quit_url="+window.location.href,location.href=a;case 3:case"end":return n.stop()}}),n)})))()},malipayappplusPay:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.log("支付宝支付"),n.next=3,(0,r.payDopaymentApi)({order_id:e.order_sn,money:e.inputAmount,pay_type:"alipayApp",passback_params:"deposit"});case 3:a=n.sent,e,uni.requestPayment({provider:"alipay",orderInfo:a.data.response.payInfo,success:function(t){uni.redirectTo({url:"/apiMember/advancelist/main"})},fail:function(e){t.log(e),t.log("支付失败")}});case 6:case"end":return n.stop()}}),n)})))()},wxpaywxappPay:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.log("微信小程序支付"),n.next=3,(0,r.payDopaymentApi)({order_id:e.order_sn,money:e.inputAmount,pay_type:"wxpayMp",openid:uni.getStorageSync("openId"),passback_params:"deposit"});case 3:if(a=n.sent,!1!==a.data.res){n.next=7;break}return uni.showToast({icon:"none",title:a.data.msg}),n.abrupt("return",!1);case 7:t.log("---------------"),t.log(a),t.log("---------------"),uni.requestPayment({provider:"wxpay",timeStamp:a.data.timeStamp,nonceStr:a.data.nonceStr,package:a.data.package,signType:"MD5",paySign:a.data.paySign,success:function(e){t.log("充值成功"),t.log("success:"+JSON.stringify(e)),uni.switchTab({url:"/pages/my/main"})},fail:function(e){t.log("fail:"+JSON.stringify(e))}});case 11:case"end":return n.stop()}}),n)})))()},wxpayh5Pay:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.iswechatH5){e.next=15;break}return e.next=3,(0,r.wechatPayApi)({order_id:t.order_sn,code:t.code,money:t.inputAmount,passback_params:"deposit"});case 3:if(n=e.sent,"code"!=n.data.status){e.next=7;break}return window.location=n.data.url,e.abrupt("return",!1);case 7:if(!0!==n.data.res){e.next=12;break}a={appId:n.data.result.appId,timeStamp:n.data.result.timeStamp,nonceStr:n.data.result.nonceStr,package:n.data.result.package,signType:"MD5",paySign:n.data.result.paySign},t.onBridgeReady(a,n.data.redirect_url),e.next=14;break;case 12:return uni.showToast({title:n.data.msg,icon:"none",duration:1500}),e.abrupt("return",!1);case 14:return e.abrupt("return",!1);case 15:return e.next=17,(0,r.payDopaymentApi)({pay_id:t.paytype,order_id:t.order_sn,money:t.inputAmount,pay_type:"wxpayH5",passback_params:"deposit"});case 17:if(i=e.sent,!1!==i.data.res){e.next=21;break}return uni.showToast({title:i.data.msg,icon:"none",duration:1500}),e.abrupt("return",!1);case 21:!0===i.data.res&&(location.href=i.data.url);case 22:case"end":return e.stop()}}),e)})))()},onBridgeReady:function(t,e){return(0,i.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:WeixinJSBridge.invoke("getBrandWCPayRequest",t,(function(t){"get_brand_wcpay_request:ok"==t.err_msg&&(location.href=e)}));case 1:case"end":return n.stop()}}),n)})))()},wxpayappplusPay:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.log("微信APP支付"),n.next=3,(0,r.payDopaymentApi)({order_id:e.order_sn,money:e.inputAmount,pay_type:"wxpayApp",passback_params:"deposit"});case 3:a=n.sent,uni.requestPayment({provider:"wxpay",orderInfo:a.data.response,success:function(e){t.log("支付成功"),t.log(e)},fail:function(e){t.log("失败"),t.log(e)}});case 5:case"end":return n.stop()}}),n)})))()},getWechatOpenid:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:uni.showLoading({title:"登录中...",mask:!0,success:function(t){}}),uni.login({success:function(){var n=(0,i.default)(regeneratorRuntime.mark((function n(a){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!a.code){n.next=7;break}return e.code=a.code,t.log("code："+e.code),n.next=5,(0,r.loginWechatApi)({code:e.code,platform:"MP-WEIXIN-MOBILE"});case 5:i=n.sent,!0===i.data.res&&uni.setStorageSync("openId",i.data.openid);case 7:case"end":return n.stop()}}),n)})));function a(t){return n.apply(this,arguments)}return a}()});case 2:case"end":return n.stop()}}),n)})))()}},onLoad:function(t){this.code=t.code,this.order_sn=t.orderId}};e.default=o}).call(this,n("5a52")["default"])}}]);